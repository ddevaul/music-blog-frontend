(this["webpackJsonpmusic-blog-frontend"]=this["webpackJsonpmusic-blog-frontend"]||[]).push([[0],{33:function(t,e,n){},35:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),s=n(25),r=n.n(s),i=(n(33),n(12)),o=n.n(i),l=n(28),u=n(16),j=n(6),h=n(7),d=n(9),b=n(8),p=(n(35),n(36),n(18)),O=n(15),x=n(1),f=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(t){var c;return Object(j.a)(this,n),(c=e.call(this,t)).state={articles:[],currentPage:1},c}return Object(h.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{children:[this.props.articles.map((function(t,e){return Object(x.jsxs)(p.a,{style:{width:"18rem"},children:[Object(x.jsx)(p.a.Img,{variant:"top",src:"holder.js/100px180"}),Object(x.jsxs)(p.a.Body,{children:[Object(x.jsx)(p.a.Title,{children:t.title}),Object(x.jsx)(p.a.Text,{children:t.content}),Object(x.jsx)("a",{href:"/article/".concat(t._id),children:"Read"})]})]})})),Object(x.jsxs)(O.a,{children:[Object(x.jsx)(O.a.First,{}),Object(x.jsx)(O.a.Prev,{}),Object(x.jsx)(O.a.Item,{children:this.state.currentPage}),Object(x.jsx)(O.a.Item,{children:this.state.currentPage+1}),Object(x.jsx)(O.a.Item,{children:this.state.currentPage+2}),Object(x.jsx)(O.a.Next,{}),Object(x.jsx)(O.a.Last,{})]})]})}}]),n}(a.a.Component),m=n(17),v=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(t){var c;return Object(j.a)(this,n),(c=e.call(this,t)).showProps=function(){console.log(window.location),console.log(c.props.location.search),console.log(c.props.match.params.id)},c.setArticles=Object(u.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://music-blog-desi.herokuapp.com/articles/".concat(c.props.match.params.id),{mode:"cors"});case 2:return e=t.sent,t.next=5,e.json();case 5:n=t.sent,console.log(e),c.setState({article:n});case 8:case"end":return t.stop()}}),t)}))),c.state={article:""},c}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setArticles()}},{key:"render",value:function(){return"token"in localStorage?Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:this.state.article.title}),Object(x.jsx)("p",{children:this.state.article.text}),Object(x.jsx)(m.a,{onClick:this.showProps,children:this.state.article.text}),Object(x.jsx)(m.a,{children:"Delete"}),Object(x.jsx)(m.a,{children:"Update"})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:this.state.article.title}),Object(x.jsx)("p",{children:this.state.article.text}),Object(x.jsx)(m.a,{onClick:this.showProps,children:this.state.article.text})]})}}]),n}(a.a.Component),g=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){return Object(j.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{children:"hi"})}}]),n}(a.a.Component),k=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){return Object(j.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("a",{href:"/",children:"home"}),Object(x.jsx)("a",{href:"/about",children:"about"})]})}}]),n}(a.a.Component),y=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(t){var c;return Object(j.a)(this,n),(c=e.call(this,t)).login=function(){var t=Object(u.a)(o.a.mark((function t(e){var n,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),console.log("send request"),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c.state.username,password:c.state.password})},t.next=5,fetch("https://music-blog-desi.herokuapp.com/login",n);case 5:return a=t.sent,t.next=8,a.json();case 8:s=t.sent,localStorage.setItem("token",s.token);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c.handleUsername=function(t){c.setState({username:t.target.value})},c.handlePassword=function(t){c.setState({password:t.target.value})},c.logout=function(){localStorage.clear()},c.state={username:"",password:""},c}return Object(h.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(m.a,{onClick:this.logout,children:"Log out"}),Object(x.jsxs)("form",{children:[Object(x.jsx)("input",{onChange:this.handleUsername,value:this.state.username,placeholder:"username"}),Object(x.jsx)("input",{onChange:this.handlePassword,value:this.state.password,type:"password",placeholder:"password"}),Object(x.jsx)("input",{onClick:this.login,type:"submit"})]})]})}}]),n}(a.a.Component),w=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(t){var c;return Object(j.a)(this,n),(c=e.call(this,t)).postArticle=function(){var t=Object(u.a)(o.a.mark((function t(e){var n,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),console.log("send request"),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({title:c.state.title,content:c.state.content})},t.next=5,fetch("https://music-blog-desi.herokuapp.com/articles",n);case 5:return a=t.sent,t.next=8,a.json();case 8:s=t.sent,console.log(s),200===a.status?c.setState({message:"Article posted"}):c.setState({message:"Article not posted"});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c.handletitle=function(t){c.setState({title:t.target.value})},c.handleContent=function(t){c.setState({content:t.target.value})},c.state={title:"",content:"",message:""},c}return Object(h.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:this.state.message}),Object(x.jsxs)("form",{children:[Object(x.jsx)("input",{onChange:this.handletitle,value:this.state.title,placeholder:"title"}),Object(x.jsx)("input",{onChange:this.handleContent,value:this.state.content,type:"text",placeholder:"content"}),Object(x.jsx)("input",{onClick:this.postArticle,type:"submit"})]})]})}}]),n}(a.a.Component),C=n(26),S=n(4),P=function(t){Object(d.a)(n,t);var e=Object(b.a)(n);function n(){var t;return Object(j.a)(this,n),(t=e.call(this)).setArticles=Object(u.a)(o.a.mark((function e(){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://music-blog-desi.herokuapp.com/articles",{mode:"cors"});case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,t.setState({articles:Object(l.a)(c)});case 7:case"end":return e.stop()}}),e)}))),t.state={articles:[]},t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setArticles()}},{key:"render",value:function(){var t=this;return Object(x.jsxs)(C.a,{children:[Object(x.jsx)(k,{}),Object(x.jsxs)(S.c,{children:[Object(x.jsx)(S.a,{exact:!0,path:"/",render:function(){return Object(x.jsx)(f,{articles:t.state.articles})}}),Object(x.jsx)(S.a,{exact:!0,path:"/about",render:function(){return Object(x.jsx)(g,{})}}),Object(x.jsx)(S.a,{component:v,path:"/article/:id",render:function(){return Object(x.jsx)(v,{})}}),Object(x.jsx)(S.a,{path:"/login",render:function(){return Object(x.jsx)(y,{})}}),Object(x.jsx)(S.a,{path:"/postarticle",render:function(){return Object(x.jsx)(w,{})}})]})]})}}]),n}(a.a.Component),A=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),c(t),a(t),s(t),r(t)}))};r.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(P,{})}),document.getElementById("root")),A()}},[[46,1,2]]]);
//# sourceMappingURL=main.8461e575.chunk.js.map